<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="formulario.css">
    <title>Altas - Omnipotent Tech</title>
</head>
<body>
    <header>
        <h1>Altas de Productos y Servicios</h1>
        <nav>
            <a href="index.html">üè† Inicio</a>
        </nav>
    </header>

    <main>
        <section>
            <h2>Registrar un nuevo producto o servicio</h2>

            <form id="formAltas">
                <!-- Nombre / Descripci√≥n -->
                <label for="nombre">Nombre/Descripci√≥n:</label>
                <input type="text" id="nombre" name="nombre" 
                    required 
                    minlength="3" maxlength="100"
                    pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë0-9.,\-_\s]{3,100}"
                    title="El nombre o descripci√≥n debe tener entre 3 y 100 caracteres, y solo puede contener letras, n√∫meros y signos b√°sicos.">

                <!-- Categor√≠a --->
                <label for="categoria">Categor√≠a:</label>
                <input type="text" id="categoria" name="categoria" 
                    required
                    pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë\s]{3,50}"
                    title="Solo letras y espacios (3-50 caracteres)">

                <!-- Tipo -->
                <label for="tipo">Tipo:</label>
                <input type="text" id="tipo" name="tipo" 
                    required 
                    pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë\s]{3,50}"
                    title="El tipo debe contener solo letras y espacios, entre 3 y 50 caracteres.">

                <!-- Marca -->
                <label for="marca">Marca/Fabricante:</label>
                <input type="text" id="marca" name="marca"
                    required
                    pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë0-9\s\-]{2,50}"
                    title="La marca o fabricante debe tener entre 2 y 50 caracteres, y puede incluir letras, n√∫meros y guiones.">

                <!-- Modelo -->
                <label for="modelo">Modelo/Versi√≥n:</label>
                <input type="text" id="modelo" name="modelo"
                    maxlength="50"
                    pattern="[A-Za-z0-9\-_.\s]{0,50}"
                    title="El modelo o versi√≥n puede contener letras, n√∫meros, guiones y puntos.">

                <!-- Proveedor -->
                <label for="proveedor">Proveedor:</label>
                <input type="text" id="proveedor" name="proveedor"
                    required
                    pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë\s]{3,50}"
                    title="El nombre del proveedor debe contener solo letras y espacios, entre 3 y 50 caracteres.">

                <!-- Stock -->
                <label for="stock">Cantidad en Stock:</label>
                <input type="number" id="stock" name="stock" 
                    required 
                    min="0" max="100000"
                    title="El stock debe ser un n√∫mero entero igual o mayor a 0.">

                <!-- Precio -->
                <label for="precio">Precio Unitario:</label>
                <input type="number" id="precio" name="precio" 
                    required 
                    min="0.01" step="0.01"
                    title="El precio debe ser un n√∫mero mayor a 0 con hasta dos decimales.">

                <!-- C√≥digo -->
                <label for="codigo">C√≥digo de Licencia:</label>
                <input type="text" id="codigo" name="codigo"
                    pattern="[A-Za-z0-9\-]{5,30}"
                    title="El c√≥digo de licencia debe tener entre 5 y 30 caracteres alfanum√©ricos.">

                <!-- Fecha -->
                <label for="fecha">Fecha de Ingreso:</label>
                <input type="date" id="fecha" name="fecha"
                    required
                    max="<?= date('Y-m-d'); ?>"
                    title="La fecha de ingreso no puede ser posterior al d√≠a de hoy.">

                <!-- Estado -->
                <label for="estado">Estado:</label>
                <select id="estado" name="estado" required>
                    <option value="">Seleccione una opci√≥n</option>
                    <option value="Disponible">Disponible</option>
                    <option value="Bajo Stock">Bajo Stock</option>
                    <option value="Agotado">Agotado</option>
                </select>

                <!-- Botones -->
                <button type="submit">Guardar</button>
                <button type="reset">Limpiar</button>
            </form>
        </section>
    </main>

    <footer style="margin-bottom: auto;">
        <div class="container">
            <p>Omnipotent Tech ¬© 2025 - Todos los derechos reservados</p>
        </div>
        <div class="container">
            <p>
                <a href="https://validator.w3.org/nu/?doc=https://armandodjefesin.github.io/Programacion-WEB/Diaz23120483_Valencia2312050_U2_PW_A/altas.html" target="_blank">
                    <img src="https://www.w3.org/Icons/valid-html401" alt="Valid HTML">
                </a>
                <a href="https://jigsaw.w3.org/css-validator/validator?uri=https://armandodjefesin.github.io/Programacion-WEB/Diaz23120483_Valencia2312050_U2_PW_A/formulario.css" target="_blank">
                    <img src="https://jigsaw.w3.org/css-validator/images/vcss" alt="Valid CSS">
                </a>
            </p>
        </div>
    </footer>

    <script>
        // Validaci√≥n de fecha no futura
        const fechaInput = document.getElementById("fecha");
        const hoy = new Date().toISOString().split("T")[0];
        fechaInput.setAttribute("max", hoy);

        // Funci√≥n para validar solo letras y espacios en tiempo real
        function soloLetrasYEspacios(input) {
            // Expresi√≥n regular que solo permite letras (incluyendo acentos y √±) y espacios
            const regex = /[^A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë\s]/g;
            
            // Si se presiona una tecla no permitida, prevenir la entrada
            if (regex.test(input.value)) {
                // Remover caracteres no permitidos
                input.value = input.value.replace(regex, '');
                
                // Opcional: mostrar mensaje temporal
                mostrarMensajeTemporal('Solo se permiten letras y espacios', input);
            }
        }

        // Funci√≥n para mostrar mensaje temporal
        function mostrarMensajeTemporal(mensaje, elemento) {
            const mensajeDiv = document.createElement('div');
            mensajeDiv.textContent = mensaje;
            mensajeDiv.style.cssText = `
                position: absolute;
                background: #ff4444;
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                font-size: 12px;
                z-index: 1000;
                margin-top: 5px;
            `;
            
            const rect = elemento.getBoundingClientRect();
            mensajeDiv.style.left = rect.left + 'px';
            mensajeDiv.style.top = (rect.bottom + window.scrollY) + 'px';
            
            document.body.appendChild(mensajeDiv);
            
            setTimeout(() => {
                document.body.removeChild(mensajeDiv);
            }, 2000);
        }

        // Aplicar validaci√≥n en tiempo real a los campos que solo deben tener letras
        document.getElementById('categoria').addEventListener('input', function(e) {
            soloLetrasYEspacios(this);
        });

        document.getElementById('tipo').addEventListener('input', function(e) {
            soloLetrasYEspacios(this);
        });

        document.getElementById('proveedor').addEventListener('input', function(e) {
            soloLetrasYEspacios(this);
        });

        // Validaci√≥n del formulario al enviar CON MENSAJE DE CONFIRMACI√ìN
        document.getElementById("formAltas").addEventListener("submit", function(e) {
            if (!this.checkValidity()) {
                e.preventDefault();
                alert("‚ùå Por favor, revisa los campos marcados. Algunos datos son inv√°lidos o est√°n incompletos.");
            } else {
                e.preventDefault(); // Prevenir env√≠o real para demostraci√≥n
                
                // Mostrar mensaje de confirmaci√≥n
                alert("‚úÖ ¬°Datos enviados correctamente!\n\nEl producto/service ha sido registrado en el sistema.");
                
                // Opcional: Limpiar el formulario despu√©s del env√≠o
                this.reset();
                
                // Opcional: Redirigir a otra p√°gina
                // window.location.href = "index.html";
            }
        });
    </script>
</body>
</html>